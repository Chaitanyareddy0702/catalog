# Code generated by KubeVela templates. DO NOT EDIT.
apiVersion: core.oam.dev/v1beta1
kind: TraitDefinition
metadata:
  name: keda-scaler
  annotations:
    definition.oam.dev/description: "keda-scaler supports multiple event to elastically scale applications, this scaler only applies to ScaledObject"
spec:
  appliesToWorkloads:
    - deployments.apps
  extension:
    install:
      helm:
        repo: kedacore
        name: keda
        url: https://kedacore.github.io/charts
        version: 1.4.3
  schematic:
    cue:
      template: |-
        outputs: cpu-scaler: {
        	apiVersion: "keda.sh/v1alpha1"
        	kind:       "ScaledObject"
        	metadata: {
        		name: context.name
        	}
        	spec: {
        		scaleTargetRef: {
        			name: context.name
        		}
        		triggers: [{
        			type: paramter.type
        			metadata: {
        				type:  "Utilization"
        				value: paramter.value
        			}
        		}]
        	}
        }
        paramter: {
        	// +usage=Types of triggering application elastic scaling, Optional: cpu, memory
        	type: string
        	// +usage=Value to trigger scaling actions, represented as a percentage of the requested value of the resource for the pods. like: "60"(60%)
        	value: string
        }